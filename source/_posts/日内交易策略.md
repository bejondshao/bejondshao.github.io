layout: post
title: '日内交易策略 '
tags:
  - 交易
categories:
  - 股票
  - 策略
comments: true
date: 2020-03-22 02:44:00
---
**注：该策略未经过详细回测和实操，仅提供思路，不作为投资依据。**
* 根据具有适量流动性和适当波动性的证券的价格规律，做日内的高抛低吸，在保证扣除手续费后实现盈利。在未发生急跌或急升的情况下，每完成一个交易回合（高抛低吸）即可实现盈利。
* 名词介绍：
  * `起始价格`: 日内交易策略的证券基准价格，理想情况下，证券价格围绕这个价格上下浮动。起始价格一般情况下日内是不会变的，特殊情况除外。
  * `价位间隔`：日内交易策略的价格浮动计量单位，一般在1%以内，比如可转债，价位间隔可以是0.25元，可以是0.5元，0.7元，1元等都可以。
  * `委托价格`：由起始价格加上或减去一个或多个价位间隔的价格，用于委托买单和卖单，实现套利。
  * `成交量`：在资金少的情况下，可以以股为单位，如100股，1000股等。资金多的情况下，可以以仓位为计量单位，比如1/4仓位，1/2仓位。
  * `手续费比例`：每次成交的手续费，比如十万分之5，百万分之5，万分之2.5等。这个手续费其实相对于套利来说微乎其微，目的是说价位间隔不可设置过小，否则获利太少意义不大。
  * `交易回合`：完成一次低价买入，高价卖出即是一个交易回合。有时候行情变化大，无法自动完成交易回合，那么在收盘时需要平衡仓位，在不受较大损失情况下，控制仓位。
* 成本分析：

    假设交易`起始价格`为`a`元，`价位间隔`为`i`元，`成交量`为`n`股，`手续费比例`为`x`。则一个交易回合（低吸高抛）的收益为 `(a + i)n - (a - i)n - (a - i)nx - (a + i)nx = 2in - 2anx`。若要满足 `2in - 2anx > 0`，需要满足 `i > ax`。以可转债为例，a往往为100左右，这里设为100元，x则是交易手续费比例，一般为十万分之五或百万分之五，这里取十万分之五，即0.00005。代入得 `i > 0.005`，即委托差值在0.005以上就可以实现盈利，盈利为 `2(i - 0.005)n`，其中n越大，即资金越多，盈利越多。
* 盈利分析：
    
    在上述成本分析可看出，一个成功的交易回合的盈利为 `2(i - 0.005)n`，可见i和n越大，一个交易回合的收益就越大。当然n大到一定程度时会影响交易价格，会让其他人误认为是压单或托单，所以挂单时要分批次挂单，这个在后面最大化利润再分析。i不应过小，仅比成本多一点虽然能成交，但是收益太小，二是证券价格容易超出价格区间，就使得后续交易很被动，要么不继续参与交割，要么放弃之前的利润而向时价靠拢。
* 最大利润：

    想要获得最大利润，不能单看某个交易回合的利润，要看整个交易日的收益，即每个交易回合的利润*交易回合数量的值达到最大。交易是否能成交取决于价格波动是否达到了交易回合设定的交易价格。倘若一支证券当日处在连续上升或持续下跌的过程，那么日内交易就基本不会进行，因为价格满足不了交易区间设定的价格，就会要么卖飞，买不到筹码；要么收集了很多筹码，但没机会出手。这种情况就是非理想状态，这种情况发生得比较少，尤其是对于前期沉寂的可转债来说，很难遇见，可能几个月都是横盘，日波动范围在一到两元之间，术语叫振幅，在3%以内，这个振幅不是稳定不变的，有时候可能一下子变大，只要收盘价和基础价格差距不大，都没什么问题。就怕收盘价与基础价相差两个以上的价位间隔。我们需要做的就是在可控范围内的振幅内反复摩擦，实现套利。

* 起始价格a，价位间隔i，成交仓位的设定

    这三个变量就构成了日内交易模型最基本的要素，设置得合理与否直接关系模型的收益率（注：资金量不同，不方便描述，因此最大利润模型以成交仓位和收益率来计算收益，不以资金量为标准）。
    
a. **1/2仓位2i委托**
    
假设证券是如下图波动（横轴坐标11:30和1:00应该是一起的，中间不应该有半小时，请忽略这个错误:joy:）：

    {% asset_img 1.png 理想情况下 %}

这是较为理想的情况，股票整日波动像波浪一样，并且上下趋势明显，波动幅度不大，且高位和低位与起始价格差距相近。这种情况就可以以开盘价为起始价a，以股票以往日内高点和低点作为高点和低点来计算价位间隔i。价位间隔的计算需要根据高点和低点的差值除以2。如果不是量化交易，人工设定买卖点，则可以直接以昨日高点和低点来设定，不过设定的差距最好相同，比如0.5元。
    
开盘前如果没有证券，则开盘可以买入1/2仓位，在有证券的前提下，在开盘后，观察证券走势，委托卖出所有的持有证券，价格为 `a + i`，并用剩余1/2的资金设定买入，价格为 `a - i`。这样能在价格高点时完成一半交易，在价格低点时，完成另一半交易。完成一个交易回合后，即实现了上述的盈利。同时继续操作。
    
在收盘时可以根据手中证券和证券价格来判断是否进行收盘前交易。一般可保持1/2仓位，1/2资金。倘若今天价格走高，证券都出手了，可以在价格不高，且未超过`a + i`的情况下适当补仓，不一定局限于1/2仓位。同理，倘若今天价格走低，接盘满仓了，尾盘可考虑在不亏损的情况下清部分仓位。这个是应该做的，可以空仓，但是尽量不要满仓。因为对于第二日的日内交易，满仓会很被动，会影响后续的日内交易。
    
开盘前的建仓和收盘前的控制仓位可适当放宽原则，即不考虑昨日和今日的起始价格，保证有部分筹码且未满仓，才能具有灵活性。

b. **1/4仓位3i委托**或**1/4仓位2i委托**
    
如果证券是如下图波动：

    {% asset_img 2.png 正常情况下 %}
    
这种情况是比第1种更普遍的情况，即日内波动不太明显，绝大多数是处在微小的波动中，高位低位出现的次数少。这种情况就很考验投机者的交易素养，倘若设定价位间隔i过大，就可能出现没有交易，或空仓或满仓的情况，这样就容易在尾盘不得不控制仓位而吐出今日的收益，导致没有收益。这种情况就需要缩小价位间隔i，比如0.25。这种价格的波动是可以根据以往证券价格来预判的，比如有的证券较不活跃，出现俗称织布机行情，这种情况在普通投资者看来是没有行情，但是在日内交易模式来看，是再理想不过了，只不过每次交易收益不高，需要多次操作罢了。
    
这种行情的交易模式可如下配置：开盘保证有1/4的仓位，然后设定较小的i值，委托卖出所有证券，卖出价格为`a + i`。如果开盘有1/2的仓位，如果委托卖出所有证券，且价格较低，一旦出现放量拉升，那么就会出现踏空的情形，从而不便再接回筹码，就会很被动，很可能丧失当日甚至以后的交易机会。这种较小波动的行情，可以委托卖出已持有的1/2仓位中的一半，即1/4仓位，价格为`a + i`，然后再委托剩下的1/4仓位，价格为`a + 2i`。同时委托买单，分别为1/4的仓位，价格为`a - i`和 `a - 2i`。不难看出，当i较小时，我们的交易价格区间就变成了3i，即以`a + 2i`的价格卖出，以`a - i`价格买入；以`a + i`价格卖出，以`a - 2i`价格买入。这样就能减少踏空和较高位（`a -  i`）接盘的风险。

倘若上述委托`a + i`成交，我们就可以按照程序委托买入1/4仓位，价格为`a - 2i`，所以就有了1/2仓位的`a - 2i`的买单尚未成交；同理倘若`a - i`成交，则接着委托卖出，价格为 `a + 2i`，所以就有了1/2仓位的`a + 2i`的卖单尚未成交。这样形成了堆积，会有不成交的情况，导致空仓或满仓。所以为了保险起见，可以在成交后的委托仍然以2i原则来委托：即不以i的大小为依据，成交后的委托价格差固定为2i，而不是3i。那么当1/4的`a + i`卖单成交后，立即委托1/4的`a - i`买单，保证仓位和资金的平衡。这种1/4仓位2i委托模式优点是不易踏空或接盘，缺点是收益较少。这种收益较多较少没有定论，完全是看日内波动的情况的。
    
c. **动态起始价格1/2仓位2i委托**
    
如果证券是如下图波动：

    {% asset_img 3.png 特殊情况下 %}

这种情况即是证券有启动的现象，在1/4或1/2仓位成交后无明显回调，资金进入趋势明显的情况，就说明日内交易失灵了，不能再按照以往的2i或3i区间模式来下买单了，这时候就要考虑调高起始价格a，重新设定交易规则，其实规则大致是不变的，只不过a在原有基础上上调到`a + i`。所以在空仓且买单`a - i`长时间未成交的情况下，就要委托`a + i`买入1/4仓位的买单，注意这个`a + i`的价格要和当前价格有一定差距，不能是立即成交的那种，否则就成了追高了。读者可能会疑问`a + i`卖出，再`a + i`买入，岂不是亏了两笔手续费？别忘了，还有一笔`a + 2i`已经成交了，所以当出现空仓未成交的情况下，说明已经有2i的盈利了，这时候那点手续费是可以忽略不计的。成大事者不拘小节，就放心的委托`a + i`买单吧。剩下的操作和前两种一样，只不过起始价格a都变为`a + i`而已。
    
同理，如果证券价格出现大幅下跌，导致满仓，这时就要考虑降低起始价格，降低委托卖出的价格，保证1/4或者1/2资金。
    
不论这两种情况发生了哪一种，收盘前最好保证有部分证券和部分现金，以应对第二天高开或低开的情况。
    
至于收益率，还是那句话，在i比较大时，交易次数越多，收益率就越高。这里就不计算了，因为理想总是很丰满，现实往往不尽如人意:joy:。这个策略就是赚个辛苦钱，别期望太高，因为每次设定都是1/4或1/2仓位，并且价格区间在价格的1%左右，所以收益不会太高。当日能有0.5%收益就不错，有1%收益就很好了。超过1%那就是运气好，晚饭可以加鸡腿了:joy:。当然，没有收益也很正常，甚至亏损（价格偏离预计区域了，收盘前买回或卖出）都很正常，有赚就有亏嘛。

再啰嗦一些：一、该日内交易策略比较适合T + 0的交易品种，因为资金可日内多次使用，且满仓也容易调仓。T + 1品种慎用。二、该策略适用于交易量一般，不能太少，也不能太多的个股，价格波动较不明显，最近一段时间处于横盘阶段，没有大量资金进入流出的个股。对于右侧的个股建议拿住不动，对于左侧的个股建议清仓。

#### 聊聊投资和投机

正常来说，投资应该是多学习，多调研，少交易。即将大多精力用于研究公司，研究对象，研究市场，预期未来数年的情况。比如股票，就是看好一个公司未来几年的发展预期。倘若我们总是盯着短期（这个短期可能是几分钟，几天，几个月，甚至一两年）股价，低买高卖，那就是投机。也就是说只要你将眼光放在股价上，进行低买高卖，不论时间长短，那就是投机。利弗莫尔就是这么区别投资和投机的，他自始至终都自认为是投机客。简单来说，投资关注的是价值，投机关注的是价格。

对于投机客来说，交易时间会容易盯盘，这有很大弊端，比如无法专心工作，享受生活，做本应该做的事，做需要专注的事，比如学习等。另外盯盘过分关注每笔交易和价格波动，未持有时希望其下跌，看到上涨则有踏空焦虑；持仓时希望其上涨，下跌则有亏损焦虑。所以盯盘肯定会造成焦虑，无法集中注意力，对什么事都无法投入，提不起兴致。而实际上，这些波动和你关系真的不大，这些价格都是数以万计的参与者委托形成的，到底是涨是跌，是由他们决定的，和你看不看盘，没有一点关系。你不看盘，它按照这个趋势波动，你看盘，它还是按照这个趋势波动。你看盘这件事是没有任何收益的事，那么你为什么还要看盘，给自己徒增烦恼呢？

你可能会反问，那么日内波动策略，不就是根据短期价格波动来买卖的吗？那不看盘如何操作？

其实，我是推崇自动化交易的，也叫量化交易。但是目前，我关注的可转债并没有交易接口，所以无法量化交易。当然可以后来丰富日内价格波动规律，统计可转债信息，发现可投机个股。

日内交易策略，应该是佛系的，无情绪的。什么意思？假设我不使用日内交易策略，那我完全不需要知道日内价格波动，交易期都不需要看盘。倘若使用日内交易策略，那么只需要根据上一交易日的高低点，收盘价，大致设定起始价格，价位间隔，双向委托价格，成交仓位而已，然后就顺其自然吧。成交了就赚个零花钱，没成交也没损失什么，不是么？设定好成交提醒，成交了，然后设定反向委托，关了手机继续工作。打开交易软件只是设定反向操作，不需要也不要关注其价格波动，不要做任何分析，不要做任何多余的调整。因为除了委托，其他的行为和思考都是多余的。倘若有交易接口，整个过程都不需要人做任何操作。这也是程序比人优秀之处，没有情感，没有思想，只按照策略规则执行。所以倘若你使用日内交易，你的行为越程序化，情感越淡化，收益就越多。避免精力损失，就是收益。